!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=[],o=[],r=arguments.length;r-- >2;)n.push(arguments[r]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(r=i.length;r--;)n.push(i[r]);else null!=i&&!0!==i&&!1!==i&&o.push(i)}return"function"==typeof e?e(t||{},o):{nodeName:e,attributes:t||{},children:o,key:t&&t.key}}function r(e,t){var n=e.to,r=e.location||window.location;return e.href=n,e.onclick=function(t){0!==t.button||t.altKey||t.metaKey||t.ctrlKey||t.shiftKey||"_blank"===e.target||t.currentTarget.origin!==r.origin||(t.preventDefault(),n!==r.pathname&&history.pushState(r.pathname,"",n))},o("a",e,t)}function i(e,t,n,o){return{isExact:e,path:t,url:n,params:o}}function a(e){for(var t=e.length;"/"===e[--t];);return e.slice(0,t+1)}function l(e){var t=e.location||window.location,n=function(e,t,n){if(e===t||!e)return i(e===t,e,t);var o=n&&n.exact,r=a(e).split("/"),l=a(t).split("/");if(!(r.length>l.length||o&&r.length<l.length)){var u=0,d={},s=r.length;for(t="";u<s;u++){if(":"===r[u][0])try{d[r[u].slice(1)]=l[u]=decodeURI(l[u])}catch(e){continue}else if(r[u]!==l[u])return;t+=l[u]+"/"}return i(!1,e,t.slice(0,-1),d)}}(e.path,t.pathname,{exact:!e.parent});return n&&e.render({match:n,location:t})}n.r(t);var u={state:{pathname:window.location.pathname,previous:window.location.pathname},actions:{go:function(e){history.pushState(null,"",e)},set:function(e){return e}},subscribe:function(e){function t(t){e.set({pathname:window.location.pathname,previous:t.detail?window.location.previous=t.detail:window.location.previous})}var n=["pushState","replaceState"].reduce(function(e,t){var n=history[t];return history[t]=function(e,t,o){n.call(this,e,t,o),dispatchEvent(new CustomEvent("pushstate",{detail:e}))},function(){history[t]=n,e&&e()}},null);return addEventListener("pushstate",t),addEventListener("popstate",t),function(){removeEventListener("pushstate",t),removeEventListener("popstate",t),n()}}};const d={height:735,width:1036,color:"rgba(0, 0, 0, 0.9)",edgeSize:100},s=()=>o("div",null,o("h2",null,"Read"),o(f,null)),c=({match:e})=>o("div",null,o("h2",null,"Edit"),o("p",null,"ドラッグ&ドロップで画像を入れられるよ"),o("p",null,"テキストはテキストボックスから入れてね"),o(f,{edit:!0})),f=({edit:e})=>(t,n)=>o("main",null,o("input",{type:"text",value:t.inputText,oninput:e=>{n.setText(e.target.value)}}),o("input",{type:"button",value:"テキスト挿入",onmouseup:e=>{n.addText()}}),o("div",{style:{position:"relative"}},o("div",{Class:"edge top",style:{height:d.edgeSize,width:"100%",background:d.color,position:"absolute","z-index":1}}),o("div",{Class:"edge left",style:{top:d.edgeSize,height:d.height,width:d.edgeSize,background:d.color,position:"absolute","z-index":1}}),o("div",{Class:"canvas",style:{position:"relative",width:d.width,height:d.height,left:d.edgeSize,top:d.edgeSize}},o("div",{style:{position:"absolute",left:d.width/2,height:d.height,"border-right":"#AAA solid 1px","z-index":1}}),t.images.map(t=>o("img",{src:t.src,draggable:0,onmousedown:o=>{e&&n.drag({id:t.id,offsetX:o.pageX-t.left,offsetY:o.pageY-t.top,target:"images"})},style:{width:t.width,left:t.left,top:t.top,cursor:e?"move":"init",position:"absolute",transform:"rotate("+t.deg+"deg)"}})),t.texts.map(t=>o("p",{style:{"user-select":"none","font-size":t.fontSize,left:t.left,top:t.top,width:t.width,cursor:e?"move":"init",position:"absolute",transform:"rotate("+t.deg+")"},onmousedown:o=>{e&&n.drag({id:t.id,offsetX:o.pageX-t.left,offsetY:o.pageY-t.top,target:"texts"})}},t.text))),o("div",{Class:"edge right",style:{top:d.edgeSize,height:d.height,position:"absolute",left:d.width+d.edgeSize,right:0,background:d.color,"z-index":1}}),o("div",{Class:"edge bottom",style:{height:d.edgeSize,top:d.edgeSize,width:"100%",background:d.color,position:"relative","z-index":1}}))),p=function(e,t,n,o){var r,i=[].map,a=o&&o.children[0]||null,l=a&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(a),u=[],d=!0,s=g(e),c=function e(t,n,o){for(var r in o)"function"==typeof o[r]?function(e,r){o[e]=function(e){var i=r(e);return"function"==typeof i&&(i=i(m(t,s),o)),i&&i!==(n=m(t,s))&&!i.then&&h(s=v(t,g(n,i),s)),i}}(r,o[r]):e(t.concat(r),n[r]=g(n[r]),o[r]=g(o[r]));return o}([],s,g(t));return h(),c;function f(e){return"function"==typeof e?f(e(s,c)):e}function p(){r=!r;var e=f(n);for(o&&!r&&(a=function e(t,n,o,r,i){if(r===o);else if(null==o||o.nodeName!==r.nodeName){var a=function e(t,n){var o="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),r=t.attributes;if(r){r.oncreate&&u.push(function(){r.oncreate(o)});for(var i=0;i<t.children.length;i++)o.appendChild(e(t.children[i]=f(t.children[i]),n));for(var a in r)w(o,a,r[a],null,n)}return o}(r,i);t.insertBefore(a,n),null!=o&&x(t,n,o),n=a}else if(null==o.nodeName)n.nodeValue=r;else{!function(e,t,n,o){for(var r in g(t,n))n[r]!==("value"===r||"checked"===r?e[r]:t[r])&&w(e,r,n[r],t[r],o);var i=d?n.oncreate:n.onupdate;i&&u.push(function(){i(e,t)})}(n,o.attributes,r.attributes,i=i||"svg"===r.nodeName);for(var l={},s={},c=[],p=o.children,h=r.children,v=0;v<p.length;v++){c[v]=n.childNodes[v];var m=y(p[v]);null!=m&&(l[m]=[c[v],p[v]])}for(var v=0,b=0;b<h.length;){var m=y(p[v]),E=y(h[b]=f(h[b]));if(s[m])v++;else if(null==E||d)null==m&&(e(n,c[v],p[v],h[b],i),b++),v++;else{var z=l[E]||[];m===E?(e(n,z[0],z[1],h[b],i),v++):z[0]?e(n,n.insertBefore(z[0],c[v]),z[1],h[b],i):e(n,c[v],null,h[b],i),s[E]=h[b],b++}}for(;v<p.length;)null==y(p[v])&&x(n,c[v],p[v]),v++;for(var v in l)s[v]||x(n,l[v][0],l[v][1])}return n}(o,a,l,l=e)),d=!1;u.length;)u.pop()()}function h(){r||(r=!0,setTimeout(p))}function g(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n}function v(e,t,n){var o={};return e.length?(o[e[0]]=e.length>1?v(e.slice(1),t,n[e[0]]):t,g(n,o)):t}function m(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function y(e){return e?e.key:null}function b(e){return e.currentTarget.events[e.type](e)}function w(e,t,n,o,r){if("key"===t);else if("style"===t)for(var i in g(o,n)){var a=null==n||null==n[i]?"":n[i];"-"===i[0]?e[t].setProperty(i,a):e[t][i]=a}else"o"===t[0]&&"n"===t[1]?(e.events||(e.events={}),e.events[t=t.slice(2)]=n,n?o||e.addEventListener(t,b):e.removeEventListener(t,b)):t in e&&"list"!==t&&!r?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function x(e,t,n){function o(){e.removeChild(function e(t,n){var o=n.attributes;if(o){for(var r=0;r<n.children.length;r++)e(t.childNodes[r],n.children[r]);o.ondestroy&&o.ondestroy(t)}return t}(t,n))}var r=n.attributes&&n.attributes.onremove;r?r(t,o):o()}}({location:u.state,pageNum:1,pageMax:4,texts:[],images:[],dragData:{id:null,offsetX:null,offsetY:null,target:null},inputText:null},{location:u.actions,drop:()=>({dragData:{id:null}}),drag:e=>({dragData:e}),move:e=>t=>((e,t)=>{if(null===e.dragData.id)return null;const n=e[e.dragData.target].findIndex(t=>t.id===e.dragData.id);return Object.assign(e[e.dragData.target][n],{left:t.x-e.dragData.offsetX,top:t.y-e.dragData.offsetY})})(t,e),addImage:e=>t=>({images:t.images.concat({id:t.images.length,src:e,left:0,top:0,width:300,deg:0})}),setText:e=>t=>({inputText:e}),addText:()=>e=>({texts:e.texts.concat({id:e.texts.length,text:e.inputText,left:0,top:0,width:200,fontSize:18,deg:0})})},e=>o("div",null,o("ul",null,o("li",null,o(r,{to:"/"},"Home")),o("li",null,o(r,{to:"/read"},"Read")),o("li",null,o(r,{to:"/edit"},"Edit"))),o("hr",null),o(l,{path:"/",render:c}),o(l,{path:"/read",render:s}),o(l,{path:"/edit",render:c})),document.body);addEventListener("mouseup",p.drop),addEventListener("mousemove",e=>p.move({x:e.pageX,y:e.pageY})),addEventListener("touchend",p.drop),addEventListener("touchmove",e=>p.move({x:e.pageX,y:e.pageY})),addEventListener("drop",e=>{e.preventDefault();var t=e.dataTransfer.files;console.log(e.pageX,e.pageY);for(var n=0;n<t.length;n++){var o=t[n];console.log(o);var r=new FileReader;r.onload=function(e){var t=e.target.result;p.addImage(t)},r.readAsDataURL(o)}}),addEventListener("dragover",e=>e.preventDefault());u.subscribe(p.location)}]);